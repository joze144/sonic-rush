(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{5600:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>u});var t=r(7876),s=r(4232),n=r(5331),i=r(7710),l=r(7112),c=r(482),o=r(8545),m=r(289),d=r(7685);function u(){var e;let a=(0,n.v)(),{connection:r}=(0,i.w)(),u=(0,o.C)(),[h,p]=(0,s.useState)(null),[g,x]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),[f,w]=(0,s.useState)(""),[y,N]=(0,s.useState)(""),[k,v]=(0,s.useState)(""),[S,C]=(0,s.useState)(""),[T,E]=(0,s.useState)(""),[R,_]=(0,s.useState)(""),[A,F]=(0,s.useState)(""),[L,O]=(0,s.useState)(null),[D,K]=(0,s.useState)("");(0,s.useEffect)(()=>{u&&u.then(p)},[u]);let B=()=>{j(""),w("")},P=async()=>{if(h&&a.publicKey){x(!0),B();try{let e=new c.BN(1e9*parseFloat(k)),t=await h.task.createTask({name:y,lockedAmount:e,creator:a.publicKey}),s=await (0,m.D)(r,t,a);s.success?(w('Task "'.concat(y,'" created successfully! Transaction: ').concat(s.signature)),N(""),v("")):s.userRejected?d.Ay.error("Transaction rejected"):j("Failed to create task: ".concat(s.error))}catch(e){j("Error creating task: ".concat(e instanceof Error?e.message:"Unknown error"))}x(!1)}},U=async()=>{if(h&&a.publicKey){x(!0),B();try{let e=T.split("\n").map(e=>e.trim()).filter(e=>e.length>0).map(e=>new l.PublicKey(e)),t=R.split("\n").map(e=>e.trim()).filter(e=>e.length>0).map(e=>new c.BN(1e9*parseFloat(e)));if(e.length!==t.length)throw Error("Number of recipients must match number of amounts");let s=await h.task.submitRewardDistribution({taskName:S,recipients:e,amounts:t,creator:a.publicKey}),n=await (0,m.D)(r,s,a);n.success?(w('Reward distribution submitted for task "'.concat(S,'"! Transaction: ').concat(n.signature)),C(""),E(""),_("")):n.userRejected?d.Ay.error("Transaction rejected"):j("Failed to submit reward distribution: ".concat(n.error))}catch(e){j("Error submitting reward distribution: ".concat(e instanceof Error?e.message:"Unknown error"))}x(!1)}},z=async()=>{if(h&&a.publicKey){x(!0),B();try{let e=await h.task.claimReward({taskName:A,claimer:a.publicKey}),t=await (0,m.D)(r,e,a);t.success?(w('Successfully claimed reward from task "'.concat(A,'"! Transaction: ').concat(t.signature)),F("")):t.userRejected?d.Ay.error("Transaction rejected"):j("Failed to claim reward: ".concat(t.error))}catch(e){j("Error claiming reward: ".concat(e instanceof Error?e.message:"Unknown error"))}x(!1)}},M=async()=>{if(h&&D){x(!0),B();try{let e=await h.task.getTaskConfig(D);O(e),e||j('Task "'.concat(D,'" not found'))}catch(e){j("Error searching task: ".concat(e instanceof Error?e.message:"Unknown error"))}x(!1)}};return a.connected?(0,t.jsxs)("div",{className:"page-container",children:[(0,t.jsx)("h1",{className:"page-title",children:"Task & Rewards Management"}),b&&(0,t.jsx)("div",{className:"alert alert-error",children:b}),f&&(0,t.jsx)("div",{className:"alert alert-success",children:f}),(0,t.jsxs)("div",{className:"page-grid",children:[(0,t.jsxs)("div",{className:"page-section",children:[(0,t.jsx)("h2",{children:"Create New Task"}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Task Name:"}),(0,t.jsx)("input",{type:"text",value:y,onChange:e=>N(e.target.value),placeholder:"Enter task name",className:"form-input"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Locked Amount (SOL):"}),(0,t.jsx)("input",{type:"number",step:"0.001",value:k,onChange:e=>v(e.target.value),placeholder:"Enter amount in SOL",className:"form-input"})]}),(0,t.jsx)("button",{onClick:P,disabled:g||!y.trim()||!k,className:"btn ".concat(!g&&y.trim()&&k?"btn-primary":""),style:{width:"100%"},children:g?"Creating...":"Create Task"})]}),(0,t.jsxs)("div",{className:"page-section",children:[(0,t.jsx)("h2",{children:"Claim Reward"}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Task Name:"}),(0,t.jsx)("input",{type:"text",value:A,onChange:e=>F(e.target.value),placeholder:"Enter task name to claim reward from",className:"form-input"})]}),(0,t.jsx)("button",{onClick:z,disabled:g||!A.trim(),className:"btn ".concat(g||!A.trim()?"":"btn-success"),style:{width:"100%"},children:g?"Claiming...":"Claim Reward"}),(0,t.jsx)("p",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginTop:"0.5rem"},children:"Note: You can only claim rewards that have been distributed to your address."})]})]}),(0,t.jsxs)("div",{className:"page-section",style:{marginBottom:"2rem"},children:[(0,t.jsx)("h2",{children:"Submit Reward Distribution"}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr 2fr",gap:"1rem",marginBottom:"1rem"},children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Task Name:"}),(0,t.jsx)("input",{type:"text",value:S,onChange:e=>C(e.target.value),placeholder:"Enter task name",className:"form-input"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Recipient Addresses (one per line):"}),(0,t.jsx)("textarea",{value:T,onChange:e=>E(e.target.value),placeholder:"Enter Solana addresses, one per line",rows:5,className:"form-textarea"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Reward Amounts (SOL, one per line):"}),(0,t.jsx)("textarea",{value:R,onChange:e=>_(e.target.value),placeholder:"Enter amounts in SOL, one per line",rows:5,className:"form-textarea"})]})]}),(0,t.jsx)("button",{onClick:U,disabled:g||!S.trim()||!T.trim()||!R.trim(),className:"btn ".concat(!g&&S.trim()&&T.trim()&&R.trim()?"btn-warning":""),style:{width:"100%"},children:g?"Submitting...":"Submit Reward Distribution"}),(0,t.jsx)("p",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginTop:"0.5rem"},children:"Note: Make sure the number of recipients matches the number of amounts."})]}),(0,t.jsxs)("div",{className:"page-section",children:[(0,t.jsx)("h2",{children:"Task Information"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[(0,t.jsx)("input",{type:"text",value:D,onChange:e=>K(e.target.value),placeholder:"Enter task name to search",className:"form-input",style:{flex:1}}),(0,t.jsx)("button",{onClick:M,disabled:g||!D.trim(),className:"btn ".concat(g||!D.trim()?"":"btn-purple"),children:g?"Searching...":"Search"})]}),L&&(0,t.jsxs)("div",{style:{padding:"1rem",background:"rgba(50, 255, 220, 0.1)",border:"1px solid rgba(50, 255, 220, 0.3)",borderRadius:"12px"},children:[(0,t.jsxs)("h3",{style:{color:"#32FFDC",marginBottom:"1rem"},children:["Task: ",D]}),(0,t.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.9)"},children:[(0,t.jsx)("strong",{children:"Creator:"})," ",null==(e=L.creator)?void 0:e.toString()]}),(0,t.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.9)"},children:[(0,t.jsx)("strong",{children:"Locked Amount:"})," ",L.lockedAmount?(L.lockedAmount.toNumber()/1e9).toFixed(3):"0"," SOL"]}),(0,t.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.9)"},children:[(0,t.jsx)("strong",{children:"Is Completed:"})," ",L.isCompleted?"Yes":"No"]}),L.recipients&&L.recipients.length>0&&(0,t.jsxs)("details",{children:[(0,t.jsx)("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"View Recipients & Amounts"}),(0,t.jsx)("div",{style:{marginTop:"0.5rem"},children:L.recipients.map((e,a)=>(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.25rem 0",fontFamily:"monospace",fontSize:"0.9rem"},children:[(0,t.jsx)("span",{children:e.toString()}),(0,t.jsxs)("span",{children:[L.amounts&&L.amounts[a]?(L.amounts[a].toNumber()/1e9).toFixed(3):"0"," SOL"]})]},a))})]})]})]})]}):(0,t.jsxs)("div",{className:"wallet-warning",children:[(0,t.jsx)("h1",{children:"Task & Rewards Management"}),(0,t.jsx)("p",{children:"Please connect your wallet to manage tasks and rewards."})]})}},7132:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks",function(){return r(5600)}])}},e=>{e.O(0,[30,764,627,288,155,371,56,636,593,792],()=>e(e.s=7132)),_N_E=e.O()}]);