(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{9580:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/squad",function(){return r(9920)}])},9920:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>u});var s=r(7876),n=r(4232),t=r(5331),l=r(7710),i=r(7112),c=r(8545),o=r(289),d=r(7685);function u(){var e,a,r;let u=(0,t.v)(),{connection:m}=(0,l.w)(),h=(0,c.C)(),[g,p]=(0,n.useState)(null),[x,j]=(0,n.useState)(!1),[b,y]=(0,n.useState)(""),[f,N]=(0,n.useState)(""),[S,q]=(0,n.useState)(""),[v,w]=(0,n.useState)(""),[C,E]=(0,n.useState)(""),[k,T]=(0,n.useState)(null),[_,M]=(0,n.useState)("");(0,n.useEffect)(()=>{h&&h.then(p)},[h]);let F=()=>{y(""),N("")},A=async()=>{if(g&&u.publicKey){j(!0),F();try{let e=v.split("\n").map(e=>e.trim()).filter(e=>e.length>0).map(e=>new i.PublicKey(e)),a=await g.squad.initialize({name:S,members:e,feeAndRentPayer:u.publicKey,mainSigningAuthority:u.publicKey}),r=await (0,o.D)(m,a,u);r.success?(N('Squad "'.concat(S,'" created successfully! Transaction: ').concat(r.signature)),q(""),w("")):r.userRejected?d.Ay.error("Transaction rejected"):y("Failed to create squad: ".concat(r.error))}catch(e){y("Error creating squad: ".concat(e instanceof Error?e.message:"Unknown error"))}j(!1)}},K=async()=>{if(g&&u.publicKey){j(!0),F();try{let e=await g.squad.claimToken({groupName:C,claimer:u.publicKey}),a=await (0,o.D)(m,e,u);a.success?(N('Successfully joined squad "'.concat(C,'"! Transaction: ').concat(a.signature)),E("")):a.userRejected?d.Ay.error("Transaction rejected"):y("Failed to join squad: ".concat(a.error))}catch(e){y("Error joining squad: ".concat(e instanceof Error?e.message:"Unknown error"))}j(!1)}},P=async()=>{if(g&&_){j(!0),F();try{let e=await g.squad.getGroupConfig(_);T(e),e||y('Squad "'.concat(_,'" not found'))}catch(e){y("Error searching squad: ".concat(e instanceof Error?e.message:"Unknown error"))}j(!1)}};return u.connected?(0,s.jsxs)("div",{className:"page-container",children:[(0,s.jsx)("h1",{className:"page-title",children:"Squad Management"}),b&&(0,s.jsx)("div",{className:"alert alert-error",children:b}),f&&(0,s.jsx)("div",{className:"alert alert-success",children:f}),(0,s.jsxs)("div",{className:"page-grid",children:[(0,s.jsxs)("div",{className:"page-section",children:[(0,s.jsx)("h2",{children:"Create New Squad"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Squad Name:"}),(0,s.jsx)("input",{type:"text",value:S,onChange:e=>q(e.target.value),placeholder:"Enter squad name",className:"form-input"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Member Addresses (one per line):"}),(0,s.jsx)("textarea",{value:v,onChange:e=>w(e.target.value),placeholder:"Enter Solana addresses, one per line",rows:5,className:"form-textarea"})]}),(0,s.jsx)("button",{onClick:A,disabled:x||!S.trim(),className:"btn ".concat(x||!S.trim()?"":"btn-primary"),style:{width:"100%"},children:x?"Creating...":"Create Squad"})]}),(0,s.jsxs)("div",{className:"page-section",children:[(0,s.jsx)("h2",{children:"Join Existing Squad"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Squad Name:"}),(0,s.jsx)("input",{type:"text",value:C,onChange:e=>E(e.target.value),placeholder:"Enter squad name to join",className:"form-input"})]}),(0,s.jsx)("button",{onClick:K,disabled:x||!C.trim(),className:"btn ".concat(x||!C.trim()?"":"btn-success"),style:{width:"100%"},children:x?"Joining...":"Join Squad & Claim Token"}),(0,s.jsx)("p",{style:{fontSize:"0.9rem",color:"#6c757d",marginTop:"0.5rem"},children:"Note: You can only join if your wallet address is whitelisted by the squad creator."})]})]}),(0,s.jsxs)("div",{className:"page-section",children:[(0,s.jsx)("h2",{children:"Squad Information"}),(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[(0,s.jsx)("input",{type:"text",value:_,onChange:e=>M(e.target.value),placeholder:"Enter squad name to search",className:"form-input",style:{flex:1}}),(0,s.jsx)("button",{onClick:P,disabled:x||!_.trim(),className:"btn ".concat(x||!_.trim()?"":"btn-purple"),children:x?"Searching...":"Search"})]}),k&&(0,s.jsxs)("div",{style:{padding:"1rem",background:"rgba(50, 255, 220, 0.1)",border:"1px solid rgba(50, 255, 220, 0.3)",borderRadius:"12px"},children:[(0,s.jsxs)("h3",{style:{color:"#32FFDC",marginBottom:"1rem"},children:["Squad: ",_]}),(0,s.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.9)"},children:[(0,s.jsx)("strong",{children:"Creator:"})," ",null==(e=k.mainSigningAuthority)?void 0:e.toString()]}),(0,s.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.9)"},children:[(0,s.jsx)("strong",{children:"Members:"})," ",(null==(a=k.members)?void 0:a.length)||0]}),(0,s.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.9)"},children:[(0,s.jsx)("strong",{children:"Token Mint:"})," ",null==(r=k.groupTokenMint)?void 0:r.toString()]}),k.members&&k.members.length>0&&(0,s.jsxs)("details",{children:[(0,s.jsx)("summary",{style:{cursor:"pointer",fontWeight:"bold",color:"#32FFDC"},children:"View Members"}),(0,s.jsx)("ul",{style:{marginTop:"0.5rem",paddingLeft:"1rem"},children:k.members.map((e,a)=>(0,s.jsx)("li",{style:{fontFamily:"Monaco, Menlo, Ubuntu Mono, monospace",fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.8)",marginBottom:"0.25rem"},children:e.toString()},a))})]})]})]})]}):(0,s.jsxs)("div",{className:"wallet-warning",children:[(0,s.jsx)("h1",{children:"Squad Management"}),(0,s.jsx)("p",{children:"Please connect your wallet to manage squads."})]})}}},e=>{e.O(0,[30,764,627,288,155,371,56,636,593,792],()=>e(e.s=9580)),_N_E=e.O()}]);