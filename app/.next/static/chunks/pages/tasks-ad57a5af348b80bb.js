(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{5600:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(7876),o=t(4232),i=t(5331),n=t(7710),s=t(7112),d=t(482),l=t(8545),c=t(289),m=t(7685);function u(){var e;let r=(0,i.v)(),{connection:t}=(0,n.w)(),u=(0,l.C)(),[p,h]=(0,o.useState)(null),[g,b]=(0,o.useState)(!1),[x,y]=(0,o.useState)(""),[f,w]=(0,o.useState)(""),[k,j]=(0,o.useState)(""),[S,v]=(0,o.useState)(""),[C,R]=(0,o.useState)(""),[T,E]=(0,o.useState)(""),[N,B]=(0,o.useState)(""),[z,A]=(0,o.useState)(""),[_,F]=(0,o.useState)(null),[L,O]=(0,o.useState)("");(0,o.useEffect)(()=>{u&&u.then(h)},[u]);let W=()=>{y(""),w("")},K=async()=>{if(p&&r.publicKey){b(!0),W();try{let e=new d.BN(1e9*parseFloat(S)),a=await p.task.createTask({name:k,lockedAmount:e,creator:r.publicKey}),o=await (0,c.D)(t,a,r);o.success?(w('Task "'.concat(k,'" created successfully! Transaction: ').concat(o.signature)),j(""),v("")):o.userRejected?m.Ay.error("Transaction rejected"):y("Failed to create task: ".concat(o.error))}catch(e){y("Error creating task: ".concat(e instanceof Error?e.message:"Unknown error"))}b(!1)}},D=async()=>{if(p&&r.publicKey){b(!0),W();try{let e=T.split("\n").map(e=>e.trim()).filter(e=>e.length>0).map(e=>new s.PublicKey(e)),a=N.split("\n").map(e=>e.trim()).filter(e=>e.length>0).map(e=>new d.BN(1e9*parseFloat(e)));if(e.length!==a.length)throw Error("Number of recipients must match number of amounts");let o=await p.task.submitRewardDistribution({taskName:C,recipients:e,amounts:a,creator:r.publicKey}),i=await (0,c.D)(t,o,r);i.success?(w('Reward distribution submitted for task "'.concat(C,'"! Transaction: ').concat(i.signature)),R(""),E(""),B("")):i.userRejected?m.Ay.error("Transaction rejected"):y("Failed to submit reward distribution: ".concat(i.error))}catch(e){y("Error submitting reward distribution: ".concat(e instanceof Error?e.message:"Unknown error"))}b(!1)}},P=async()=>{if(p&&r.publicKey){b(!0),W();try{let e=await p.task.claimReward({taskName:z,claimer:r.publicKey}),a=await (0,c.D)(t,e,r);a.success?(w('Successfully claimed reward from task "'.concat(z,'"! Transaction: ').concat(a.signature)),A("")):a.userRejected?m.Ay.error("Transaction rejected"):y("Failed to claim reward: ".concat(a.error))}catch(e){y("Error claiming reward: ".concat(e instanceof Error?e.message:"Unknown error"))}b(!1)}},U=async()=>{if(p&&L){b(!0),W();try{let e=await p.task.getTaskConfig(L);F(e),e||y('Task "'.concat(L,'" not found'))}catch(e){y("Error searching task: ".concat(e instanceof Error?e.message:"Unknown error"))}b(!1)}};return r.connected?(0,a.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,a.jsx)("h1",{style:{textAlign:"center",marginBottom:"2rem"},children:"Task & Rewards Management"}),x&&(0,a.jsx)("div",{style:{padding:"1rem",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"8px",color:"#721c24",marginBottom:"1rem"},children:x}),f&&(0,a.jsx)("div",{style:{padding:"1rem",backgroundColor:"#d1e7dd",border:"1px solid #badbcc",borderRadius:"8px",color:"#0f5132",marginBottom:"1rem"},children:f}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[(0,a.jsxs)("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #dee2e6"},children:[(0,a.jsx)("h2",{children:"Create New Task"}),(0,a.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Task Name:"}),(0,a.jsx)("input",{type:"text",value:k,onChange:e=>j(e.target.value),placeholder:"Enter task name",style:{width:"100%",padding:"0.5rem",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"1rem"}})]}),(0,a.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Locked Amount (SOL):"}),(0,a.jsx)("input",{type:"number",step:"0.001",value:S,onChange:e=>v(e.target.value),placeholder:"Enter amount in SOL",style:{width:"100%",padding:"0.5rem",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"1rem"}})]}),(0,a.jsx)("button",{onClick:K,disabled:g||!k.trim()||!S,style:{width:"100%",padding:"0.75rem",backgroundColor:g?"#6c757d":"#007bff",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:g?"not-allowed":"pointer"},children:g?"Creating...":"Create Task"})]}),(0,a.jsxs)("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #dee2e6"},children:[(0,a.jsx)("h2",{children:"Claim Reward"}),(0,a.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Task Name:"}),(0,a.jsx)("input",{type:"text",value:z,onChange:e=>A(e.target.value),placeholder:"Enter task name to claim reward from",style:{width:"100%",padding:"0.5rem",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"1rem"}})]}),(0,a.jsx)("button",{onClick:P,disabled:g||!z.trim(),style:{width:"100%",padding:"0.75rem",backgroundColor:g?"#6c757d":"#28a745",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:g?"not-allowed":"pointer"},children:g?"Claiming...":"Claim Reward"}),(0,a.jsx)("p",{style:{fontSize:"0.9rem",color:"#6c757d",marginTop:"0.5rem"},children:"Note: You can only claim rewards that have been distributed to your address."})]})]}),(0,a.jsxs)("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #dee2e6",marginBottom:"2rem"},children:[(0,a.jsx)("h2",{children:"Submit Reward Distribution"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr 2fr",gap:"1rem",marginBottom:"1rem"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Task Name:"}),(0,a.jsx)("input",{type:"text",value:C,onChange:e=>R(e.target.value),placeholder:"Enter task name",style:{width:"100%",padding:"0.5rem",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"1rem"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Recipient Addresses (one per line):"}),(0,a.jsx)("textarea",{value:T,onChange:e=>E(e.target.value),placeholder:"Enter Solana addresses, one per line",rows:5,style:{width:"100%",padding:"0.5rem",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"1rem",fontFamily:"monospace"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Reward Amounts (SOL, one per line):"}),(0,a.jsx)("textarea",{value:N,onChange:e=>B(e.target.value),placeholder:"Enter amounts in SOL, one per line",rows:5,style:{width:"100%",padding:"0.5rem",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"1rem",fontFamily:"monospace"}})]})]}),(0,a.jsx)("button",{onClick:D,disabled:g||!C.trim()||!T.trim()||!N.trim(),style:{width:"100%",padding:"0.75rem",backgroundColor:g?"#6c757d":"#ffc107",color:g?"white":"#212529",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:g?"not-allowed":"pointer"},children:g?"Submitting...":"Submit Reward Distribution"}),(0,a.jsx)("p",{style:{fontSize:"0.9rem",color:"#6c757d",marginTop:"0.5rem"},children:"Note: Make sure the number of recipients matches the number of amounts."})]}),(0,a.jsxs)("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #dee2e6"},children:[(0,a.jsx)("h2",{children:"Task Information"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[(0,a.jsx)("input",{type:"text",value:L,onChange:e=>O(e.target.value),placeholder:"Enter task name to search",style:{flex:1,padding:"0.5rem",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"1rem"}}),(0,a.jsx)("button",{onClick:U,disabled:g||!L.trim(),style:{padding:"0.5rem 1rem",backgroundColor:g?"#6c757d":"#6f42c1",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:g?"not-allowed":"pointer"},children:g?"Searching...":"Search"})]}),_&&(0,a.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"4px"},children:[(0,a.jsxs)("h3",{children:["Task: ",L]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Creator:"})," ",null==(e=_.creator)?void 0:e.toString()]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Locked Amount:"})," ",_.lockedAmount?(_.lockedAmount.toNumber()/1e9).toFixed(3):"0"," SOL"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Is Completed:"})," ",_.isCompleted?"Yes":"No"]}),_.recipients&&_.recipients.length>0&&(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"View Recipients & Amounts"}),(0,a.jsx)("div",{style:{marginTop:"0.5rem"},children:_.recipients.map((e,r)=>(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.25rem 0",fontFamily:"monospace",fontSize:"0.9rem"},children:[(0,a.jsx)("span",{children:e.toString()}),(0,a.jsxs)("span",{children:[_.amounts&&_.amounts[r]?(_.amounts[r].toNumber()/1e9).toFixed(3):"0"," SOL"]})]},r))})]})]})]})]}):(0,a.jsxs)("div",{style:{textAlign:"center",padding:"2rem"},children:[(0,a.jsx)("h1",{children:"Task & Rewards Management"}),(0,a.jsx)("p",{children:"Please connect your wallet to manage tasks and rewards."})]})}},7132:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks",function(){return t(5600)}])}},e=>{e.O(0,[30,764,627,288,155,371,56,636,593,792],()=>e(e.s=7132)),_N_E=e.O()}]);